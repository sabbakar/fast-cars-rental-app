{% extends 'app.html' %}
{% block content %}

<title>Dashboard | FAST CARS </title>
{% if request.args.get('success') %}
<div class="alert alert-success">
  Booking successful!
</div>
{% endif %}
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert alert-success">
            <ul>
                {% for message in messages %}
                    <li>{{ message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endwith %}

<div class="container">
  <h2>Welcome to the Dashboard</h2>

    {% if user %}
        <p> user information</p>
        <ul>
            <li>Name : {{ user[1] }}</li>
            <li>Email : {{ user[2] }}</li>
        </ul>
<!--        <a href="/logout" class="btn btn-dark">Logout</a>-->
<!--       <a href="{{ url_for('logout') }}" class="btn btn-dark">Logout</a>-->
<!--        <a href="/contact" class="btn btn-dark">Contact Us</a>-->
    {% endif %}


    <h3>Your Bookings</h3>
  {% if bookings %}
    <table class="table">
      <thead>
        <tr>
            <th>S/N</th>
          <th>Car</th>
          <th>Pickup Location</th>
          <th>Dropoff Location</th>
          <th>Pickup Date & Time</th>
          <th>Dropoff Date & Time</th>
          <th>Status</th>
          <th>Booked at</th>
        </tr>
      </thead>
      <tbody>
        {% for booking in bookings %}
          <tr>
            {# <td>{{ booking[0] }}</td>  <!-- Booking ID -->#}
              <td>{{ loop.index }}</td>
        <td>{{ booking[1] }}</td>  <!-- Car Name -->
        <td>{{ booking[2] }}</td>  <!-- Pickup Location -->
        <td>{{ booking[3] }}</td>  <!-- Dropoff Location -->
        <td>{{ booking[4] }} at {{ booking[5] }}</td>  <!-- Pickup Date & Time -->
        <td>{{ booking[6] }} at {{ booking[7] }}</td>  <!-- Dropoff Date & Time -->
        <td>{{ booking[8] }}</td>  <!-- Status -->
        <td>{{ booking[9] }}</td>  <!-- Created at -->
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
</div>

</div>
<br>



<br>
{% endblock %}